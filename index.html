<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Prediction Tool</title>
<style>
  body { font-family: Arial; padding:20px; background:#f2f2f2; }
  .card { background:#fff; padding:20px; border-radius:10px; max-width:400px; margin:auto; }
  .btn { padding:10px 15px; border:none; background:#444; color:#fff; border-radius:6px; cursor:pointer; }
  body.dark { background:#222; color:#fff; }
  body.dark .card{ background:#333; color:#fff; }
  .predict-input { width:100%; padding:10px; font-size:18px; margin-bottom:10px; }
</style>
</head>
<body>
<div class="card">
  <h2>Prediction Tool</h2>
  <input class="predict-input" placeholder="Enter number" />
  <button class="btn" id="predictBtn">Predict</button>
  <div id="suggestion" style="margin-top:10px;"></div>
</div>

<script>
/* Dark Mode */
const toggleBtn = document.createElement('button');
toggleBtn.textContent = 'Toggle Dark Mode';
toggleBtn.className='btn';
document.body.prepend(toggleBtn);
toggleBtn.onclick = ()=> document.body.classList.toggle('dark');

/* History */
const historyDiv = document.createElement('div');
historyDiv.innerHTML = '<h3>History</h3><ul id="hist"></ul>';
document.body.appendChild(historyDiv);
const histEl = document.getElementById('hist');
function addHistory(v){ let li=document.createElement('li'); li.textContent=v; histEl.appendChild(li); }

/* Auto-Suggestion */
const input=document.querySelector('.predict-input');
const suggestion=document.getElementById('suggestion');
input.addEventListener('input',()=>{ suggestion.textContent='Suggestion: '+(parseInt(input.value||0)+1); });

/* Trend Chart */
let trendData=[];
const canvas=document.createElement('canvas');
canvas.width=300; canvas.height=120;
document.body.appendChild(canvas);
const ctx=canvas.getContext('2d');
function drawChart(){
  ctx.clearRect(0,0,300,120);
  if(trendData.length<2) return;
  ctx.beginPath();
  ctx.moveTo(0,120-trendData[0]);
  for(let i=1;i<trendData.length;i++){
    ctx.lineTo(i*(300/(trendData.length-1)),120-trendData[i]);
  }
  ctx.stroke();
}

/* Probability Meter */
const probBox=document.createElement('div');
probBox.style.marginTop='10px';
probBox.textContent='Probability: --%';
document.body.appendChild(probBox);
function updateProbability(val){
  const p=Math.min(100,Math.max(0,(val%10)*10));
  probBox.textContent='Probability: '+p+'%';
}

/* Pattern Detector */
const patternBox=document.createElement('div');
patternBox.style.marginTop='10px';
patternBox.textContent='Pattern: None';
document.body.appendChild(patternBox);
function detectPattern(){
  if(trendData.length<3) return 'Not enough data';
  let a=trendData.slice(-3);
  if(a[2]>a[1]&&a[1]>a[0]) return 'Rising trend';
  if(a[2]<a[1]&&a[1]<a[0]) return 'Falling trend';
  return 'Mixed pattern';
}

/* Auto Refresh */
let autoRefresh=false;
const autoBtn=document.createElement('button');
autoBtn.textContent='Toggle Auto Refresh';
autoBtn.className='btn';
document.body.appendChild(autoBtn);
autoBtn.onclick=()=> autoRefresh=!autoRefresh;
setInterval(()=>{ if(autoRefresh) drawChart(); },2000);

/* Sound Alert */
const alertSound=new Audio();
alertSound.src='data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAA=';

/* Predict button */
document.getElementById('predictBtn').addEventListener('click',()=>{
  let val=parseInt(input.value||0);
  trendData.push(val);
  if(trendData.length>30) trendData.shift();
  drawChart();
  updateProbability(val);
  patternBox.textContent='Pattern: '+detectPattern();
  addHistory(val);
  alertSound.play();
});
</script>

</body>
</html>
